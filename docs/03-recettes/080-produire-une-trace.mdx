---
hide_table_of_contents: true
---

# üïµÔ∏è‚Äç‚ôÇÔ∏è Trace d‚Äôex√©cution

Lorsqu'on a un morceau de code, on peut souhaiter savoir dans quel ordre les instructions sont ex√©cut√©es.

## Principe

On veut accomplir 2 √©l√©ments principaux :
1. Indiquer quelles lignes de code s'ex√©cutent dans quel ordre.
2. Indiquer les effets de chaque ligne de code.
3. Indiquer la pile d'appels (si on a des fonctions).

<Tabs queryString="recette-activite">
<TabItem value="Exemple simple" label="Exemple simple">

<Row>
<Column>

### Code
Si on a le code suivant :

```python  showLineNumbers
a = 3 + 4
b = a * 2
print(f'salut {b}')
```

</Column>
<Column>

    ### Trace
    On aura la trace suivante :

    {/*| ligne ex√©cut√©e | effet |
    |-----------------|-----------------------------------|
    | a = 3 + 4 | a: 7 |
    | b = a * 2 | a: 7, b: 14 |
    | print(f'salut \{b\}') | a: 7, b: 14 <br/> affiche "salut 14" |*/}

    | # ligne   | a     | b     | affichage |
    |-----------|-------|-------|-----------|
    | 1         | 7     |       |           |
    | 2         | 7     | 14    |           |
    | 3         | 7     | 14    | salut 14  |

</Column>
</Row>

Dans le cas d'une s√©quence d'instructions, on peut voir que les instructions sont ex√©cut√©es dans
l'ordre de lecture du code. Simple!

</TabItem>

<TabItem value="Avec fonction" label="Avec fonction">

            ### Code
            Si on a le code suivant :

            ```python showLineNumbers
            def carre(n):
                return n * n

            def somme_carres(x, y):
                return carre(x) + carre(y)

            def affiche_resultat():
                a = 2
                b = 3
                total = somme_carres(a, b)
                print(f'La somme des carr√©s est : {total}')

            affiche_resultat()
            ```

            ### Trace
            On indique aussi la **pile d'appels**, c'est-√†-dire les fonctions en cours d'ex√©cution (3e colonne).

            Ce genre de code fait souvent appel √† plusieurs appels de fonctions **imbriqu√©s**.

            On peut donc visualiser la pile d'appels comme un empilement temporaire :
            chaque appel s‚Äôajoute en haut de la pile, et dispara√Æt d√®s qu‚Äôil est termin√©.


            | # ligne | a | b | x | y | n | total | affichage | pile d'appels | fonction appel√©e | valeur retourn√©e |
            |---------|---|---|---|---|---|-------|-----------|---------------|------------------|------------------|
            | 13      |   |   |   |   |   |       |         | \_\_main__    | affiche_resultat() |  |
            | 8       | 2 |   |   |   |   |       |         | affiche_resultat <br/> \_\_main__ |  |  |
            | 9       | 2 | 3 |   |   |   |       |         | affiche_resultat <br/> \_\_main__ |  |  |
            | 10      | 2 | 3 |   |   |   |       |         | affiche_resultat <br/> \_\_main__ | somme_carres(2, 3) |  |
            | 5       |   |   | 2 | 3 |   |       |         | somme_carres <br/> affiche_resultat <br/> \_\_main__ | carre(2) |  |
            | 2       |   |   |   |   | 2 |       |         | carre <br /> somme_carres <br/> affiche_resultat <br/> \_\_main__ |  | 4 |
            | 5       |   |   | 2 | 3 |   |       |         | somme_carres <br/> affiche_resultat <br/> \_\_main__ | carre(3) |  |
            | 2       |   |   |   |   | 3 |       |         | carre <br /> somme_carres <br/> affiche_resultat <br/> \_\_main__ |  | 9 |
            | 5       |   |   | 2 | 3 |   |       |         | somme_carres <br/> affiche_resultat <br/> \_\_main__ |  | 13 |
            | 10      | 2 | 3 |   |   |   |   13  |         | affiche_resultat <br/> \_\_main__ |  |  |
            | 11      | 2 | 3 |   |   |   |   13  | La somme des carr√©s est : 13 | affiche_resultat <br/> \_\_main__ |  |  |

</TabItem>

<TabItem value="avecportee" label="Avec port√©e">

Lorsque des variables avec des noms identiques existent dans des port√©es diff√©rentes,
on peut regrouper les variables par port√©e dans la trace.<br/>
    Pour cela, on ajoute une ligne horizontale en haut de notre tableau pour chaque port√©e.


    ### Code
    Si on a le code suivant :
    ```python showLineNumbers
    def ma_fonction(y):
        x = 3 + y
        print(f'dans ma_fonction, x vaut {x}')

    x = 5
    print(f'dans main, x vaut {x}')
    ma_fonction(100)
    print(f'dans main, x vaut toujours {x}')
    ```


    ### Trace
    On aura la trace suivante :

    <table>
      <thead>
        <tr>
          <th></th>
          <th>port√©e globale</th>
          <th colspan="2">port√©e de `ma_fonction`</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
        <tr>
          <th># ligne</th>
          <th>x</th>
          <th>y</th>
          <th>x</th>
          <th>affichage</th>
          <th>fonction appel√©e</th>
          <th>valeur retourn√©e</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>5</td>
          <td>5</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>6</td>
          <td>5</td>
          <td></td>
          <td></td>
          <td>dans main, x vaut 5</td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>7</td>
          <td>5</td>
          <td></td>
          <td></td>
          <td></td>
          <td>`ma_fonction(100)`</td>
          <td></td>
        </tr>
        <tr>
          <td>2</td>
          <td>5</td>
          <td>100</td>
          <td>103</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>3</td>
          <td>5</td>
          <td>100</td>
          <td>103</td>
          <td>dans ma_fonction, x vaut 103</td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>8</td>
          <td>5</td>
          <td></td>
          <td></td>
          <td>dans main, x vaut toujours 5</td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>


</TabItem>

<TabItem value="Avec boucle" label="Avec boucle">

<Row>
<Column>

### Code
Si on a le code suivant :

```python showLineNumbers
i = 0
while i < 2:
    print(f'i vaut {i}')
    i = i + 1
```

</Column>
<Column>

    ### Trace
    On aura la trace suivante :

    {/*| ligne ex√©cut√©e | effet |
    |----------------|-------------------------------|
    | i = 0 | i vaut 0 |
    | while i < 2: | i: 0 ‚Üí condition vraie |
    | print(...) | i: 0 <br/> affiche "i vaut 0" |
    | i = i + 1 | i devient 1 |
    | while i < 2: | i: 1 ‚Üí condition vraie |
    | print(...) | i: 1 <br/> affiche "i vaut 1" |
    | i = i + 1 | i devient 2 |
    | while i < 2: | i: 2 ‚Üí condition fausse |*/}

    | # ligne   | i     | affichage |
    |-----------|-------|-----------|
    | 1         | 0     |           |
    | 3         | 0     | i vaut 0  |
    | 4         | 1     |           |
    | 3         | 1     | i vaut 1  |
    | 4         | 2     |           |

</Column>
</Row>

On voit que :
- On indique seulement les lignes qui s'ex√©cutent en vrai.
- Certaines lignes s'ex√©cutent plusieurs fois, c'est le principe de la boucle!
- On appelle ce cheminement le flot de contr√¥le.

</TabItem>

<TabItem value="valider-une-trace" label="Valider une trace">

Afin de valider une trace :
1. Placer un point d'arr√™t sur la premi√®re ligne qui s'ex√©cute.
2. Lancer l'ex√©cution en mode d√©bogage.
3. Sauter de ligne en ligne pour voir si la trace est correcte.

Si on se rend √† la fin de l'ex√©cution et que toutes tes valeurs √©taient bonnes,
on a bien compris ce que fait le code.

</TabItem>
</Tabs>